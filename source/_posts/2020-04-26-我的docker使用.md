---
title: 我的docker使用
date: 2020-04-26 19:38:08
tags:
categories:
- 神器
---
&ensp;&ensp;初次使用docker完全是处于一个想法，我想用docker打造一个我的Python环境，随时打包，随时分享！我是在Ubuntu上安装并使用docker，安装方式可以完全采用菜鸟教程中的[Ubuntu Docker安装](https://www.runoob.com/docker/ubuntu-docker-install.html).

&ensp;&ensp;我们首先需要在dockerhub创建一个账号，有点类似github平台，里面的仓库是有公私之。我们可以编写dockerfile来创建自己的镜像。我偷了下懒，直接pull了官方的Ubuntu镜像并创建容器。在这个容器里安装自己的Python环境。如果要使用的话，需要进入该容器中，再运行自己的Python程序。当然了我们也可可以使用vscode，通过ssh连接到docker容器中，这个远程连接并运行程序的功能是免费的，不想Pycharm需要升级到企业版才可以使用，所以VScode真的是良心产品。由于我的镜像中会包含一些我的文件，所以我将仓库设为了私有，如果你想使用，可以通过邮箱联系我。由于我是个初学者，我的docker镜像越来越大，竟也有十几G之大。不过我还是可以接受的。

&ensp;&ensp;这张图非常形象的描绘了docker的使用原理。
![JRcidI.png](https://s1.ax1x.com/2020/04/27/JRcidI.png)

&ensp;&ensp;下面我将介绍常用的docker命令

~~~
docker login 登录
docker logout  退出docker登录

docker pull beichen1994/python:v1   下载beichen1994仓库下的python:v1镜像
~~~

~~~
docker image ls -a  列出本地所有镜像
docker image rm 9eeba   删除镜像
docker rmi centos/centos:7.2
删除其中一个镜像，这里的镜像有两个repo引用，并且没有容器使用
即删除时指定名称，而不是IMAGE ID。

docker container ls -a  列出本地所有容器
docker container rm a43d5   删除容器 docker container prune  删除所有容器
docker container logs  查看容器日志
docker container start a43d5  启动关闭的容器
docker container stop a43d5  关闭容器
~~~

~~~
docker commit -a"beichen1994" -m"all kinds of python environment" 3976 py_env
使用 docker commit 命令来将容器打包为镜像

docker tag py_env:latest beichen1994/python:v3
将这个新镜像打上 tag，方便在公共服务器进行上传

docker push beichen1994/python:v4
上传镜像
~~~

~~~
docker export 7691a814370e > ubuntu.tar  导出容器
docker import - test/ubuntu:v1   导入容器
docker inspect 89fc 查看docker容器详细信息
docker inspect --format='{{.NetworkSettings.IPAddress}}'
628a windows:172.17.0.2
~~~


~~~
docker run；创建和启动一个新的容器实例，操作对象是镜像

docker run -dit -p 5592:5592 -p 5593:5593 -p 8022:22 -p 12345:8888 -p 6006:6006 -v /C/Users/86176/Desktop/python:/home/python  beichen1994/python:v2  /bin/bash
新建容器，宿主机与docker的端口映射，容器名，镜像和路径映射


docker exec:在已运行的容器中，执行命令，操作对象是容器,并且退出时，容器不会停止
docker exec -it 69d1 /bin/bash 
在新的终端进入正在运行的容器


docker start: 启动已经停止的容器
docker start -i 282fae
指定交互式，启动282fae容器
~~~

~~~
注意 在docker容器中共 /lib/systemd/system/docker.service 中 ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://0.0.0.0:2375 才会正常显示端口
~~~

~~~
jupyter notebook --port 8888 --ip 0.0.0.0 --allow-root
docker运行jupyter
~~~

~~~
sudo apt-get remove docker docker-engine docker.io docker-ce
sudo apt-get autoremove
卸载docker
~~~