---
title: çˆ¬è™«ä¹‹7å¤šçº¿ç¨‹
date: 2020-02-08 22:50:44
tags:
- çˆ¬è™«
categories: 
- Computer
---

# å¤šçº¿ç¨‹


## ç¬¬ä¸€ç§
import threading 
åˆ›å»ºä¸€ä¸ªæ´»åŠ¨å‡½æ•°
threading.Thread(target = å‡½æ•°å,args = (a,b))

```
from time import ctime
import threading

#è‡ªå®šä¹‰å‡½æ•°coding()
def coding(language):
    for i in range(5):
        print("I\'m coding ",language," program at ",ctime() )
        
#è‡ªå®šä¹‰å‡½æ•°music()
def music():
    for i in range(5):
        print("I\'m listening music at ",ctime())

        
if __name__ == "__main__":
    print("çº¿ç¨‹%såœ¨è¿è¡Œ..." % threading.current_thread().name)
    
    thread_list = []
    
    #åˆ›å»ºçº¿ç¨‹
    t1 = threading.Thread(target = coding,args=('python',))
    #args=(3),ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°å­— args=(3,) ä¼šè®¤ä¸ºæ˜¯ä¸€ä¸ªå…ƒç»„
    t2 = threading.Thread(target = music)
    
    thread_list.append(t1)
    thread_list.append(t2)
    
    for t in thread_list:
        t.setDaemon(True) #è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹
        #å½“JVMä¸­æ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹çš„æ—¶å€™ï¼ŒJVMå°±å¯ä»¥é€€å‡ºäº†ï¼›
        #å¦‚æœè¿˜æœ‰ä¸€ä¸ªæˆ–ä»¥ä¸Šçš„éå®ˆæŠ¤çº¿ç¨‹åˆ™ä¸ä¼šé€€å‡º
        #ç­‰å¾…ä¸»çº¿ç¨‹è¿è¡Œå®Œæ¯•åé”€æ¯
        
        t.start() #æ‰§è¡Œçº¿ç¨‹
        t.join() # åœ¨å­çº¿ç¨‹è¿æ¬¡ç»“æŸä¹‹å‰ï¼Œä¸»çº¿ç¨‹è¢«é˜»å¡
    
    print("çº¿ç¨‹%såœæ­¢!" % threading.current_thread().name)
```

## locké”
å¯¹å…±äº«å˜é‡ï¼Œéœ€è¦åŠ é”
å¤šçº¿ç¨‹ï¼Œå®¹æ˜“å‘ç”Ÿå†²çªï¼Œå¿…é¡»ç”¨é”åŠ ä»¥éš”ç¦»ï¼ŒåŒæ—¶ï¼Œåˆè¦å°å¿ƒæ­»é”çš„å‘ç”Ÿ

```
import threading 

sum = 0
lock = threading.Lock()  #åˆ›å»ºä¸€ä¸ªé”

#è‡ªå®šä¹‰å‡½æ•°
def put_money(money):
    global sum   #å…¨å±€å˜é‡ï¼Œå¯å…±äº«
    sum = sum+money

def get_money(money):
    global sum   #å…¨å±€å˜é‡ï¼Œå¯å…±äº«
    sum = sum-money
    
def cunqu(money):
    lock.acquire() # æ”¹åŠ¨1.. å…ˆè¦è·å–é”
    try:
        for i in range(1000000):  #æ‰§è¡Œæ¬¡æ•°å¿…é¡»è¶³å¤Ÿå¤šï¼Œæ‰èƒ½ä½“ç°å‡ºç‰¹ç‚¹æ¥
            #å…ˆå­˜å†å–ï¼Œé’±æ•°åº”è¯¥ä¸º0
            put_money(money)
            get_money(money)
    except:
        lock.release()  # æ”¹åŠ¨2..åˆ«å¿˜äº†é‡Šæ”¾é”:

t1 = threading.Thread(target=cunqu,args=(500,))
t2 = threading.Thread(target=cunqu,args=(1000,))
t1.start()
t2.start()
t1.join()
t2.join()
print(sum)
```

## ç¬¬äºŒç§
```
from threading import Thread
import time 

#ç»§æ‰¿ threading.Threadç±»

class Eat(Thread):
    def __init__(self,name):
        super().__init__()
        self.name = name
        
    #åŠŸèƒ½å®ç°    
    def run(self):
        time.sleep(2)
        print('%s is eating '%self.name)
        
if __name__ == '__main__':
    t = Eat('ff')
    t.start()
    print('ğŸ·')
```