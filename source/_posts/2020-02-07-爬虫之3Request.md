---
title: 爬虫之3Request
date: 2020-02-07 23:54:11
tags:
- 爬虫
categories: 
- Computer
---

# Requests: 
基于urllib
## 实例引入

```
import requests
response = requests.get("https://www.baidu.com")

print(response)
print(response.status_code)
print(response.text)
print(response.cookies)
```

## 各种请求方式
```
import requests
response = requests.get("https://www.baidu.com")
print(type(response))
print(response.status_code)
print(type(response.text))
print(response.text)
print(response.cookies)
```

## 请求
```
import requests

response= requests.get("http://httpbin.org/get")
print(response.text)
```
```
import requests

data = {
    'name':'germey',
    'age':22
    }
response=requests.get("http://httpbin.org/get",params=data)
print(response.text)
```
添加headers
```
import requests
    
headers={
    'User-Agent':'Mozilla/5.0'
}
response=requests.get("https://www.zhihu.com/explore",headers=headers)
print(response.text)
```

## 解析json
```
import requests
import json

response = requests.get("http://httpbin.org/get")

print(response.text)
print(response.json())

print(json.loads(response.text))

```

## 获取二进制数据
```
import requests

response=requests.get("https://github.com/favicon.ico")

print(response.text)
print(response.content)
```

## 响应
response 响应
```
import requests

response = requests.get('http://www.jianshu.com')
print(response.status_code)
print(response.headers)
print(response.cookies)
print(response.url)
print(response.history)
```
状态码判断
```
import requests

response = requests.get('http://www.jianshu.com')
exit()if not response.status_code==200 else print('Request Successfully')
```
代理设置
```
import requests

proxies={
    'http':'socks5//127.0.0.1:9743',
    'https':'socks5://127.0.0.9743'
}
reponse=requests.get("https://www.taobao.com",proxies=proxies)
print("response.statu_code")
```
证书验证
```
import requests

response = requests.get("https://www.12306.cn",verify=False)
print(response.status_code)
```
## 异常处理
```
import requests
from requests.exceptions import ReadTimeout,HTTPError,RequestException
try:
    response=requests.get('http://httpbin.org/get',timeout=0.1)
    print(response.status_code)
except ReadTimeout:
    print('timeout')
except HTTPError:
    print('http error')
except RequestException:
    print('Error')
```
