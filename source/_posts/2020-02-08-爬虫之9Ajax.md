---
title: 爬虫之9Ajax
date: 2020-02-08 22:53:54
tags:
- 爬虫
categories: 
- Computer
---


### Ajax (Asynchronous JavaScript and XML)（异步的JavaScript和XML）

不是一门编程语言，而是利用JavaScript在保证页面不刷新，页面链接不改变情况下与服务器交换数据并更新部分网页的技术


原始HTML的某些数据通过Ajax加载，或JavaScript处理，得到了新的页面数据
在这个过程中，页面实际上是在后台与服务器进行了数据交换，获取数据后，利用JavaScript改变网页，这样网页内容就会更新。例如刷微博

#### 基本原理
发送请求
解析内容
渲染网页

```
var xmlhttp;

if(window.XMLHttpRequest){
    xmlhttp = new XMLHttpRequest();             #新建XMLHttpRequest对象
}else{
    xmlhttp = new ActiveObject('Microsoft.XMLHttp');
}
xmlhttp.onreadystatechange = function(){
    #调用onreadystatechange属性进行监听，当服务器返回响应，对应的方法就会触发
    if(xmlhttp.readyState==4&&xmlhttp.status==200){
        documetn.getElementById('myDiv').innerHTML = xmlhttp.responseText;
        #得到响应内容，将ID为myDiv的节点内部HTML进行替换
    }
}

xmlhttp.open("POST","/ajax/",true);           
xmlhttp.send()       #向服务器发送链接                     
```

#### Ajax分析方法

1. 查看请求

F12开发者工具-

* Elements选项卡:
    查看网页的源代码

* Network选项卡:
    页面加载过程中浏览器与服务器之间发送请求与接收响应的记录

    xhr(XMLHttpRequest)类型

* Headers选项卡:
        Requests Headers: X-Requested-With:XMLHttpRequest

* Preview选项卡:

    可以看到响应内容，JSON格式

* Response选项卡：

    从中观察到真实的返回数据
    

2. 过滤请求
  筛选栏XHR,得到所有Ajax请求，随意点开一个条目，可以清楚看到其Request URL,Reuqest Headers,Response Headers,Response Body等
    
#### Ajax结果提取
   

1. 在Headers，分析请求链接，得到变化的参数
2. 在Preview，观察响应内容
    





